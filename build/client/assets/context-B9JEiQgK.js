import{r as l}from"./index-D3fv15Yl.js";import{t as z,s as D,a as A,b as H,d as Y}from"./use-is-after-initial-mount-DTj1DCv8.js";const q=l.createContext(null),U=l.createContext(null);function _(o){return z[o]}function G(){const o=l.useContext(q);if(!o)throw new Error("No theme was provided. Your application must be wrapped in an <AppProvider> or <ThemeProvider> component. See https://polaris.shopify.com/components/app-provider for implementation instructions.");return o}function J(){const o=l.useContext(U);if(!o)throw new Error("No themeName was provided. Your application must be wrapped in an <AppProvider> or <ThemeProvider> component. See https://polaris.shopify.com/components/app-provider for implementation instructions.");return o}function B(o,t,e){let n,i,r,a,c,d,h=0,w=!1,m=!1,I=!0;const y=!t&&t!==0;if(typeof o!="function")throw new TypeError("Expected a function");const f=t||0;typeof e=="object"&&(w=!!e.leading,m="maxWait"in e,r=m?Math.max(Number(e.maxWait)||0,f):void 0,I="trailing"in e?!!e.trailing:I);function p(s){const u=n,k=i;return n=void 0,i=void 0,h=s,a=o.apply(k,u),a}function g(s,u){return y?(cancelAnimationFrame(c),requestAnimationFrame(s)):setTimeout(s,u)}function E(s){if(y)return cancelAnimationFrame(s);clearTimeout(s)}function L(s){return h=s,c=g(v,f),w?p(s):a}function W(s){const u=s-d,k=s-h,b=f-u;return m&&r?Math.min(b,r-k):b}function N(s){const u=s-d,k=s-h;return d===void 0||u>=f||u<0||m&&r&&k>=r}function v(){const s=Date.now();if(N(s))return R(s);c=g(v,W(s))}function R(s){return c=void 0,I&&n?p(s):(n=i=void 0,a)}function O(){c!==void 0&&E(c),h=0,n=d=i=c=void 0}function F(){return c===void 0?a:R(Date.now())}function M(){return c!==void 0}function S(...s){const u=Date.now(),k=N(u);if(n=s,i=this,d=u,k){if(c===void 0)return L(d);if(m)return c=g(v,f),p(d)}return c===void 0&&(c=g(v,f)),a}return S.cancel=O,S.flush=F,S.pending=M,S}class T{static get zero(){return new T}constructor({top:t=0,left:e=0,width:n=0,height:i=0}={}){this.top=t,this.left=e,this.width=n,this.height=i}get center(){return{x:this.left+this.width/2,y:this.top+this.height/2}}}function x(o){try{const t=o.getBoundingClientRect();return new T({top:t.top,left:t.left,width:t.width,height:t.height})}catch{return new T({width:window.innerWidth,height:window.innerHeight})}}const C=1e3/60;class K{constructor(t){this.stickyItems=[],this.stuckItems=[],this.container=null,this.topBarOffset=0,this.handleResize=B(()=>{this.manageStickyItems()},C,{leading:!0,trailing:!0,maxWait:C}),this.handleScroll=B(()=>{this.manageStickyItems()},C,{leading:!0,trailing:!0,maxWait:C}),t&&this.setContainer(t)}registerStickyItem(t){this.stickyItems.push(t)}unregisterStickyItem(t){const e=this.stickyItems.findIndex(({stickyNode:n})=>t===n);this.stickyItems.splice(e,1)}getStickyItem(t){return this.stickyItems.find(({stickyNode:e})=>t===e)}setContainer(t){this.container=t,P(t)&&this.setTopBarOffset(t),this.container.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.handleResize),this.manageStickyItems()}removeScrollListener(){this.container&&(this.container.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleResize))}manageStickyItems(){if(this.stickyItems.length<=0)return;const t=this.container?$(this.container):0,e=x(this.container).top+this.topBarOffset;this.stickyItems.forEach(n=>{const{handlePositioning:i}=n,{sticky:r,top:a,left:c,width:d}=this.evaluateStickyItem(n,t,e);this.updateStuckItems(n,r),i(r,a,c,d)})}evaluateStickyItem(t,e,n){var g;const{stickyNode:i,placeHolderNode:r,boundingElement:a,offset:c,disableWhenStacked:d}=t;if(d&&D().matches)return{sticky:!1,top:0,left:0,width:"auto"};const h=c?this.getOffset(i)+parseInt(A.space["space-500"],10):this.getOffset(i),w=e+h,m=r.getBoundingClientRect().top-n+e,I=n+h,y=r.getBoundingClientRect().width,f=r.getBoundingClientRect().left;let p;if(a==null)p=w>=m;else{const E=i.getBoundingClientRect().height||((g=i.firstElementChild)==null?void 0:g.getBoundingClientRect().height)||0,L=a.getBoundingClientRect().bottom-E+e-n;p=w>=m&&w<L}return{sticky:p,top:I,left:f,width:y}}updateStuckItems(t,e){const{stickyNode:n}=t;e&&!this.isNodeStuck(n)?this.addStuckItem(t):!e&&this.isNodeStuck(n)&&this.removeStuckItem(t)}addStuckItem(t){this.stuckItems.push(t)}removeStuckItem(t){const{stickyNode:e}=t,n=this.stuckItems.findIndex(({stickyNode:i})=>e===i);this.stuckItems.splice(n,1)}getOffset(t){if(this.stuckItems.length===0)return 0;let e=0,n=0;const i=this.stuckItems.length,r=x(t);for(;n<i;){const a=this.stuckItems[n].stickyNode;if(a!==t){const c=x(a);j(r,c)||(e+=x(a).height)}else break;n++}return e}isNodeStuck(t){return this.stuckItems.findIndex(({stickyNode:n})=>t===n)>=0}setTopBarOffset(t){const e=t.querySelector(`:not(${H.selector}) ${Y.selector}`);this.topBarOffset=e?e.clientHeight:0}}function P(o){return o===document}function $(o){return P(o)?document.body.scrollTop||document.documentElement.scrollTop:o.scrollTop}function j(o,t){const e=o.left,n=o.left+o.width,i=t.left;return t.left+t.width<e||n<i}const V=l.createContext(void 0),Z=l.createContext(void 0);class tt extends l.PureComponent{componentDidMount(){this.attachListener()}componentDidUpdate({passive:t,...e}){this.detachListener(e),this.attachListener()}componentWillUnmount(){this.detachListener()}render(){return null}attachListener(){const{event:t,handler:e,capture:n,passive:i,window:r}=this.props;(r||globalThis.window).addEventListener(t,e,{capture:n,passive:i})}detachListener(t){const{event:e,handler:n,capture:i,window:r}=t||this.props;(r||globalThis.window).removeEventListener(e,n,i)}}const et=l.createContext(void 0),nt=l.createContext(void 0);export{tt as E,Z as M,et as P,T as R,K as S,U as T,nt as a,q as b,V as c,B as d,x as e,J as f,_ as g,G as u};
