import{R as i,r as m,g as ct,d as pe,j as p}from"./index-D3fv15Yl.js";import{u as dt}from"./components-DF02m5MT.js";import{I as ut,e as ft,a as pt,S as ht,b as mt,c as gt,K as Pe,d as Ne,f as Ae,g as bt,h as Ct,P as Et,C as Oe,T as Be,B as he}from"./Page-Bppm3941.js";import{T as vt}from"./TitleBar-DFMSJ8Yc.js";import{L as xe}from"./Layout-CfeWuKp7.js";import{c as k,v as oe,g as Ye,h as ue,s as Qe,T as R,d as et,M as Ie,u as le,a as J,j as Ce,b as z,k as yt,l as xt,m as St,n as kt,I as te,w as Tt,W as Pt,S as Nt,B as ce}from"./ButtonGroup-CesFbz1y.js";import{S as Dt,B as We}from"./Banner-DFT9xzSF.js";import{c as Ft,e as _t,d as Mt,E as De,u as tt}from"./context-B9JEiQgK.js";import{k as Fe,c as It,p as jt}from"./use-is-after-initial-mount-DTj1DCv8.js";import{S as Rt,F as Ht}from"./context-CKWczhHV.js";import"./banner-context-Bl0rAjEp.js";var nt=function(a){return i.createElement("svg",Object.assign({viewBox:"0 0 20 20"},a),i.createElement("path",{fillRule:"evenodd",d:"M5 10c0-.414.336-.75.75-.75h8.5c.414 0 .75.336.75.75s-.336.75-.75.75h-8.5c-.414 0-.75-.336-.75-.75Z"}))};nt.displayName="MinusIcon";var at=function(a){return i.createElement("svg",Object.assign({viewBox:"0 0 20 20"},a),i.createElement("path",{fillRule:"evenodd",d:"M9.116 4.323a1.25 1.25 0 0 1 1.768 0l2.646 2.647a.75.75 0 0 1-1.06 1.06l-2.47-2.47-2.47 2.47a.75.75 0 1 1-1.06-1.06l2.646-2.647Z"}),i.createElement("path",{fillOpacity:.33,fillRule:"evenodd",d:"M9.116 15.677a1.25 1.25 0 0 0 1.768 0l2.646-2.647a.75.75 0 0 0-1.06-1.06l-2.47 2.47-2.47-2.47a.75.75 0 0 0-1.06 1.06l2.646 2.647Z"}))};at.displayName="SortAscendingIcon";var st=function(a){return i.createElement("svg",Object.assign({viewBox:"0 0 20 20"},a),i.createElement("path",{fillOpacity:.33,fillRule:"evenodd",d:"M9.116 4.823a1.25 1.25 0 0 1 1.768 0l2.646 2.647a.75.75 0 0 1-1.06 1.06l-2.47-2.47-2.47 2.47a.75.75 0 1 1-1.06-1.06l2.646-2.647Z"}),i.createElement("path",{fillRule:"evenodd",d:"M9.116 15.177a1.25 1.25 0 0 0 1.768 0l2.646-2.647a.75.75 0 0 0-1.06-1.06l-2.47 2.47-2.47-2.47a.75.75 0 0 0-1.06 1.06l2.646 2.647Z"}))};st.displayName="SortDescendingIcon";const wt=m.createContext(!1);var X={Checkbox:"Polaris-Checkbox",ChoiceLabel:"Polaris-Checkbox__ChoiceLabel",Backdrop:"Polaris-Checkbox__Backdrop",Input:"Polaris-Checkbox__Input","Input-indeterminate":"Polaris-Checkbox__Input--indeterminate",Icon:"Polaris-Checkbox__Icon",animated:"Polaris-Checkbox--animated",toneMagic:"Polaris-Checkbox--toneMagic",hover:"Polaris-Checkbox--hover",error:"Polaris-Checkbox--error",checked:"Polaris-Checkbox--checked",pathAnimation:"Polaris-Checkbox--pathAnimation"},Q={Choice:"Polaris-Choice",labelHidden:"Polaris-Choice--labelHidden",Label:"Polaris-Choice__Label",Control:"Polaris-Choice__Control",disabled:"Polaris-Choice--disabled",toneMagic:"Polaris-Choice--toneMagic",Descriptions:"Polaris-Choice__Descriptions",HelpText:"Polaris-Choice__HelpText"};function Lt({id:t,label:a,disabled:n,error:e,children:s,labelHidden:r,helpText:o,onClick:c,labelClassName:l,fill:d,bleed:u,bleedBlockStart:f,bleedBlockEnd:h,bleedInlineStart:b,bleedInlineEnd:E,tone:x}){const v=k(Q.Choice,r&&Q.labelHidden,n&&Q.disabled,x&&Q[oe("tone",x)],l),T={...ue("choice","bleed-block-end","space",h||u),...ue("choice","bleed-block-start","space",f||u),...ue("choice","bleed-inline-start","space",b||u),...ue("choice","bleed-inline-end","space",E||u),...Object.fromEntries(Object.entries(Ye("choice","fill",d)).map(([P,F])=>[P,F?"100%":"auto"]))},M=i.createElement("label",{className:v,htmlFor:t,onClick:c,style:Qe(T)},i.createElement("span",{className:Q.Control},s),i.createElement("span",{className:Q.Label},i.createElement(R,{as:"span",variant:"bodyMd"},a))),I=o?i.createElement("div",{className:Q.HelpText,id:rt(t)},i.createElement(R,{as:"span",tone:n?void 0:"subdued"},o)):null,N=e&&typeof e!="boolean"&&i.createElement("div",{className:Q.Error},i.createElement(ut,{message:e,fieldID:t})),C=I||N?i.createElement("div",{className:Q.Descriptions},N,I):null;return C?i.createElement("div",null,M,C):M}function rt(t){return`${t}HelpText`}const At=m.forwardRef(function({ariaControls:a,ariaDescribedBy:n,label:e,labelHidden:s,checked:r=!1,helpText:o,disabled:c,id:l,name:d,value:u,error:f,onChange:h,onFocus:b,onBlur:E,labelClassName:x,fill:v,bleed:T,bleedBlockStart:M,bleedBlockEnd:I,bleedInlineStart:N,bleedInlineEnd:C,tone:P},F){const y=m.useRef(null),_=m.useId(),j=l??_,O=m.useContext(wt);m.useImperativeHandle(F,()=>({focus:()=>{y.current&&y.current.focus()}}));const V=()=>{E&&E()},q=()=>{h==null||y.current==null||c||(h(y.current.checked,j),y.current.focus())},L=[];f&&typeof f!="boolean"&&L.push(ft(j)),o&&L.push(rt(j)),n&&L.push(n);const $=L.length?L.join(" "):void 0,Z=k(X.Checkbox,f&&X.error),A=r==="indeterminate",U=!A&&!!r,B=A?{indeterminate:"true","aria-checked":"mixed"}:{"aria-checked":U},K=i.createElement("svg",{viewBox:"0 0 16 16",shapeRendering:"geometricPrecision",textRendering:"geometricPrecision"},i.createElement("path",{className:k(r&&X.checked),d:"M1.5,5.5L3.44655,8.22517C3.72862,8.62007,4.30578,8.64717,4.62362,8.28044L10.5,1.5",transform:"translate(2 2.980376)",opacity:"0",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",pathLength:"1"})),w=k(X.Input,A&&X["Input-indeterminate"],P&&X[oe("tone",P)]),W={helpText:o,error:f,bleed:T,bleedBlockStart:M,bleedBlockEnd:I,bleedInlineStart:N,bleedInlineEnd:C};return i.createElement(Lt,Object.assign({id:j,label:e,labelHidden:s,disabled:c,labelClassName:k(X.ChoiceLabel,x),fill:v,tone:P},W),i.createElement("span",{className:Z},i.createElement("input",Object.assign({ref:y,id:j,name:d,value:u,type:"checkbox",checked:U,disabled:c,className:w,onBlur:V,onChange:Ot,onClick:q,onFocus:b,"aria-invalid":f!=null,"aria-controls":a,"aria-describedby":$,role:O?"presentation":"checkbox"},B)),i.createElement("span",{className:X.Backdrop,onClick:Ve,onKeyUp:Ve}),i.createElement("span",{className:k(X.Icon,!A&&X.animated)},A?i.createElement(et,{source:nt}):K)))});function Ot(){}function Ve(t){t.stopPropagation()}var Se={Backdrop:"Polaris-Backdrop",transparent:"Polaris-Backdrop--transparent",belowNavigation:"Polaris-Backdrop--belowNavigation"};function Bt(){const t=m.useContext(Rt);if(!t)throw new Ie("No ScrollLockManager was provided.");return t}function Wt(t){const a=Bt();return m.useEffect(()=>(a.registerScrollLock(),()=>{a.unregisterScrollLock()}),[a]),null}function Vt(t){const{onClick:a,onTouchStart:n,belowNavigation:e,transparent:s,setClosing:r}=t,o=k(Se.Backdrop,e&&Se.belowNavigation,s&&Se.transparent),c=()=>{r&&r(!0)},l=()=>{r&&r(!1),a&&a()};return i.createElement(i.Fragment,null,i.createElement(Wt,null),i.createElement("div",{className:o,onClick:l,onTouchStart:n,onMouseDown:c}))}var $t={InlineGrid:"Polaris-InlineGrid"};function zt({children:t,columns:a,gap:n,alignItems:e}){const s={...Ye("inline-grid","grid-template-columns",Ut(a)),...ue("inline-grid","gap","space",n),"--pc-inline-grid-align-items":e};return i.createElement("div",{className:$t.InlineGrid,style:Qe(s)},t)}function Ut(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.fromEntries(Object.entries(t).map(([a,n])=>[a,$e(n)])):$e(t)}function $e(t){if(t)return typeof t=="number"||!isNaN(Number(t))?`repeat(${Number(t)}, minmax(0, 1fr))`:typeof t=="string"?t:t.map(a=>{switch(a){case"oneThird":return"minmax(0, 1fr)";case"oneHalf":return"minmax(0, 1fr)";case"twoThirds":return"minmax(0, 2fr)"}}).join(" ")}const Gt=m.createContext(void 0);var qt=typeof Element<"u",Zt=typeof Map=="function",Kt=typeof Set=="function",Xt=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function me(t,a){if(t===a)return!0;if(t&&a&&typeof t=="object"&&typeof a=="object"){if(t.constructor!==a.constructor)return!1;var n,e,s;if(Array.isArray(t)){if(n=t.length,n!=a.length)return!1;for(e=n;e--!==0;)if(!me(t[e],a[e]))return!1;return!0}var r;if(Zt&&t instanceof Map&&a instanceof Map){if(t.size!==a.size)return!1;for(r=t.entries();!(e=r.next()).done;)if(!a.has(e.value[0]))return!1;for(r=t.entries();!(e=r.next()).done;)if(!me(e.value[1],a.get(e.value[0])))return!1;return!0}if(Kt&&t instanceof Set&&a instanceof Set){if(t.size!==a.size)return!1;for(r=t.entries();!(e=r.next()).done;)if(!a.has(e.value[0]))return!1;return!0}if(Xt&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(a)){if(n=t.length,n!=a.length)return!1;for(e=n;e--!==0;)if(t[e]!==a[e])return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof a.valueOf=="function")return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof a.toString=="function")return t.toString()===a.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(a).length)return!1;for(e=n;e--!==0;)if(!Object.prototype.hasOwnProperty.call(a,s[e]))return!1;if(qt&&t instanceof Element)return!1;for(e=n;e--!==0;)if(!((s[e]==="_owner"||s[e]==="__v"||s[e]==="__o")&&t.$$typeof)&&!me(t[s[e]],a[s[e]]))return!1;return!0}return t!==t&&a!==a}var Jt=function(a,n){try{return me(a,n)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}};const Yt=ct(Jt);function Qt(t){return function(a,n){const{firstVisibleColumnIndex:e,tableLeftVisibleEdge:s,tableRightVisibleEdge:r}=t,o=a.offsetLeft,c=o+a.offsetWidth,l=ze(o,s,r,"left"),d=ze(c,s,r,"right"),u=l||d,f=a.offsetWidth;return u&&(t.firstVisibleColumnIndex=Math.min(e,n)),{leftEdge:o,rightEdge:c,isVisible:u,width:f,index:n}}}function ze(t,a,n,e){return t>=a+(e==="left"?0:30)&&t<=n-30}function en(t,a){const{firstVisibleColumnIndex:n}=t,e=Math.max(n-1,0),s=a[e],r=a[n];return{previousColumn:s,currentColumn:r}}var g={DataTable:"Polaris-DataTable",condensed:"Polaris-DataTable--condensed",Navigation:"Polaris-DataTable__Navigation",Pip:"Polaris-DataTable__Pip","Pip-visible":"Polaris-DataTable__Pip--visible",ScrollContainer:"Polaris-DataTable__ScrollContainer",Table:"Polaris-DataTable__Table",TableRow:"Polaris-DataTable__TableRow",Cell:"Polaris-DataTable__Cell",IncreasedTableDensity:"Polaris-DataTable__IncreasedTableDensity",ZebraStripingOnData:"Polaris-DataTable__ZebraStripingOnData",RowCountIsEven:"Polaris-DataTable__RowCountIsEven",ShowTotalsInFooter:"Polaris-DataTable__ShowTotalsInFooter","Cell-separate":"Polaris-DataTable__Cell--separate","Cell-firstColumn":"Polaris-DataTable__Cell--firstColumn","Cell-numeric":"Polaris-DataTable__Cell--numeric","Cell-truncated":"Polaris-DataTable__Cell--truncated","Cell-header":"Polaris-DataTable__Cell--header","Cell-sortable":"Polaris-DataTable__Cell--sortable","Heading-left":"Polaris-DataTable__Heading--left","Cell-verticalAlignTop":"Polaris-DataTable__Cell--verticalAlignTop","Cell-verticalAlignBottom":"Polaris-DataTable__Cell--verticalAlignBottom","Cell-verticalAlignMiddle":"Polaris-DataTable__Cell--verticalAlignMiddle","Cell-verticalAlignBaseline":"Polaris-DataTable__Cell--verticalAlignBaseline",hoverable:"Polaris-DataTable--hoverable","Cell-hovered":"Polaris-DataTable__Cell--hovered",Icon:"Polaris-DataTable__Icon",Heading:"Polaris-DataTable__Heading",StickyHeaderEnabled:"Polaris-DataTable__StickyHeaderEnabled",StickyHeaderWrapper:"Polaris-DataTable__StickyHeaderWrapper","Cell-sorted":"Polaris-DataTable__Cell--sorted","Cell-total":"Polaris-DataTable__Cell--total",ShowTotals:"Polaris-DataTable__ShowTotals","Cell-total-footer":"Polaris-DataTable--cellTotalFooter",Footer:"Polaris-DataTable__Footer",StickyHeaderInner:"Polaris-DataTable__StickyHeaderInner","StickyHeaderInner-isSticky":"Polaris-DataTable__StickyHeaderInner--isSticky",StickyHeaderTable:"Polaris-DataTable__StickyHeaderTable",FixedFirstColumn:"Polaris-DataTable__FixedFirstColumn",StickyTableHeadingsRow:"Polaris-DataTable__StickyTableHeadingsRow",TooltipContent:"Polaris-DataTable__TooltipContent"};function de({content:t,contentType:a,nthColumn:n,firstColumn:e,truncate:s,header:r,total:o,totalInFooter:c,sorted:l,sortable:d,sortDirection:u,inFixedNthColumn:f,verticalAlign:h="top",defaultSortDirection:b="ascending",onSort:E,colSpan:x,setRef:v=()=>{},stickyHeadingCell:T=!1,stickyCellWidth:M,hovered:I=!1,handleFocus:N=()=>{},hasFixedNthColumn:C=!1,fixedCellVisible:P=!1,firstColumnMinWidth:F,style:y,lastFixedFirstColumn:_}){const j=le(),O=a==="numeric",V=k(g.Cell,g[`Cell-${oe("verticalAlign",h)}`],e&&g["Cell-firstColumn"],s&&g["Cell-truncated"],r&&g["Cell-header"],o&&g["Cell-total"],c&&g["Cell-total-footer"],O&&g["Cell-numeric"],d&&g["Cell-sortable"],l&&g["Cell-sorted"],T&&g.StickyHeaderCell,I&&g["Cell-hovered"],_&&f&&P&&g["Cell-separate"],n&&f&&T&&g.FixedFirstColumn),q=k(r&&g.Heading,r&&a==="text"&&g["Heading-left"]),L=k(d&&g.Icon),$=l&&u?u:b,Z=$==="descending"?st:at,A=u==="ascending"?"descending":"ascending",U=j.translate("Polaris.DataTable.sortAccessibilityLabel",{direction:l?A:$}),B=i.createElement("span",{className:L},i.createElement(et,{source:Z,accessibilityLabel:U})),K=!(T&&C&&n&&!f),W=d?i.createElement("button",{className:q,onClick:E,onFocus:N,tabIndex:K?0:-1},B,t):t,G=x&&x>1?{colSpan:x}:{},S=n&&F?{minWidth:F}:{minWidth:M},D=i.createElement("th",Object.assign({ref:v},Fe.props,G,{className:V,"aria-sort":u,style:{...y,...S},"data-index-table-sticky-heading":!0}),W),ve=r?i.createElement("th",Object.assign({},Fe.props,{"aria-sort":u},G,{ref:v,className:V,scope:"col",style:{...S}}),W):i.createElement("th",Object.assign({},G,{ref:v,className:V,scope:"row",style:{...S}}),s?i.createElement(tn,{className:g.TooltipContent},t):t),ye=r||e||n?ve:i.createElement("td",Object.assign({className:V},G),t);return T?D:ye}const tn=({children:t,className:a=""})=>{const n=m.useRef(null),{current:e}=n,s=i.createElement("span",{ref:n,className:a},t);return(e==null?void 0:e.scrollWidth)>(e==null?void 0:e.offsetWidth)?i.createElement(pt,{content:n.current.innerText},s):s};function nn({children:t,onMount:a,fallback:n=null}){const e=It(),s=e?t:n;return m.useEffect(()=>{e&&a&&a()},[e,a]),i.createElement(i.Fragment,null,s)}function an(){const t=m.useContext(Ft);if(!t)throw new Ie("No StickyManager was provided.");return t}class sn extends m.Component{constructor(...a){super(...a),this.state={isSticky:!1,style:{}},this.placeHolderNode=null,this.stickyNode=null,this.setPlaceHolderNode=n=>{this.placeHolderNode=n},this.setStickyNode=n=>{this.stickyNode=n},this.handlePositioning=(n,e=0,s=0,r=0)=>{const{isSticky:o}=this.state;(n&&!o||!n&&o)&&(this.adjustPlaceHolderNode(n),this.setState({isSticky:!o},()=>{if(this.props.onStickyChange==null||(this.props.onStickyChange(!o),this.props.boundingElement==null))return null;this.props.boundingElement.toggleAttribute("data-sticky-active")}));const c=n?{position:"fixed",top:e,left:s,width:r}:{};this.setState({style:c})},this.adjustPlaceHolderNode=n=>{this.placeHolderNode&&this.stickyNode&&(this.placeHolderNode.style.paddingBottom=n?`${_t(this.stickyNode).height}px`:"0px")}}componentDidMount(){const{boundingElement:a,offset:n=!1,disableWhenStacked:e=!1,stickyManager:s}=this.props;!this.stickyNode||!this.placeHolderNode||s.registerStickyItem({stickyNode:this.stickyNode,placeHolderNode:this.placeHolderNode,handlePositioning:this.handlePositioning,offset:n,boundingElement:a,disableWhenStacked:e})}componentDidUpdate(){const{boundingElement:a,offset:n=!1,disableWhenStacked:e=!1,stickyManager:s}=this.props;if(!this.stickyNode||!this.placeHolderNode)return;const r=s.getStickyItem(this.stickyNode);(!r||a!==r.boundingElement||n!==r.offset||e!==r.disableWhenStacked)&&(s.unregisterStickyItem(this.stickyNode),s.registerStickyItem({stickyNode:this.stickyNode,placeHolderNode:this.placeHolderNode,handlePositioning:this.handlePositioning,offset:n,boundingElement:a,disableWhenStacked:e}))}componentWillUnmount(){const{stickyManager:a}=this.props;this.stickyNode&&a.unregisterStickyItem(this.stickyNode)}render(){const{style:a,isSticky:n}=this.state,{children:e}=this.props,s=rn(e)?e(n):e;return i.createElement("div",null,i.createElement("div",{ref:this.setPlaceHolderNode}),i.createElement("div",{ref:this.setStickyNode,style:a},s))}}function rn(t){return typeof t=="function"}function on(t){const a=an();return i.createElement(sn,Object.assign({},t,{stickyManager:a}))}function ln({columnVisibilityData:t,isScrolledFarthestLeft:a,isScrolledFarthestRight:n,navigateTableLeft:e,navigateTableRight:s,fixedFirstColumns:r,setRef:o=()=>{}}){const c=le(),l=t.map((f,h)=>{if(h<r)return;const b=k(g.Pip,f.isVisible&&g["Pip-visible"]);return i.createElement("div",{className:b,key:`pip-${h}`})}),d=c.translate("Polaris.DataTable.navAccessibilityLabel",{direction:"left"}),u=c.translate("Polaris.DataTable.navAccessibilityLabel",{direction:"right"});return i.createElement("div",{className:g.Navigation,ref:o},i.createElement(J,{variant:"tertiary",icon:ht,disabled:a,accessibilityLabel:d,onClick:e}),l,i.createElement(J,{variant:"tertiary",icon:mt,disabled:n,accessibilityLabel:u,onClick:s}))}const Ue=t=>{const a=[];return t&&t.forEach(n=>{a.push(n.clientHeight)}),a};class cn extends m.PureComponent{constructor(...a){super(...a),this.state={condensed:!1,columnVisibilityData:[],isScrolledFarthestLeft:!0,isScrolledFarthestRight:!1,rowHovered:void 0},this.dataTable=m.createRef(),this.scrollContainer=m.createRef(),this.table=m.createRef(),this.stickyTable=m.createRef(),this.stickyNav=null,this.headerNav=null,this.tableHeadings=[],this.stickyHeadings=[],this.tableHeadingWidths=[],this.stickyHeaderActive=!1,this.scrollStopTimer=null,this.handleResize=Mt(()=>{const{table:{current:n},scrollContainer:{current:e}}=this;let s=!1;n&&e&&(s=n.scrollWidth>e.clientWidth+1),this.setState({condensed:s,...this.calculateColumnVisibilityData(s)})}),this.setCellRef=({ref:n,index:e,inStickyHeader:s})=>{if(n!=null)if(s){this.stickyHeadings[e]=n;const r=n.querySelector("button");if(r==null)return;r.addEventListener("focus",this.handleHeaderButtonFocus)}else this.tableHeadings[e]=n,this.tableHeadingWidths[e]=n.clientWidth},this.changeHeadingFocus=()=>{const{tableHeadings:n,stickyHeadings:e,stickyNav:s,headerNav:r}=this,o=e.findIndex(b=>{var E;return b===((E=document.activeElement)==null?void 0:E.parentElement)}),c=n.findIndex(b=>{var E;return b===((E=document.activeElement)==null?void 0:E.parentElement)}),l=s==null?void 0:s.querySelectorAll("button"),d=r==null?void 0:r.querySelectorAll("button");let u=-1;l==null||l.forEach((b,E)=>{b===document.activeElement&&(u=E)});let f=-1;if(d==null||d.forEach((b,E)=>{b===document.activeElement&&(f=E)}),o<0&&c<0&&u<0&&f<0)return null;let h;if(o>=0?h=n[o].querySelector("button"):c>=0&&(h=e[c].querySelector("button")),u>=0?h=d==null?void 0:d[u]:f>=0&&(h=l==null?void 0:l[f]),h==null)return null;h.style.visibility="visible",h.focus(),h.style.removeProperty("visibility")},this.calculateColumnVisibilityData=n=>{const e=this.fixedFirstColumns(),{table:{current:s},scrollContainer:{current:r},dataTable:{current:o}}=this,{stickyHeader:c}=this.props;if((c||n)&&s&&r&&o){const l=s.querySelectorAll(Fe.selector),d=l[e-1],u=e?d.offsetLeft+d.offsetWidth:0;if(l.length>0){const f=l.length-1,h=r.scrollLeft+u,b=r.scrollLeft+o.offsetWidth,E={firstVisibleColumnIndex:f,tableLeftVisibleEdge:h,tableRightVisibleEdge:b},x=[...l].map(Qt(E)),v=x[x.length-1],T=e?h===u:h===0;return{columnVisibilityData:x,...en(E,x),isScrolledFarthestLeft:T,isScrolledFarthestRight:v.rightEdge<=b}}}return{columnVisibilityData:[],previousColumn:void 0,currentColumn:void 0}},this.handleHeaderButtonFocus=n=>{var h;const e=this.fixedFirstColumns();if(this.scrollContainer.current==null||n.target==null||this.state.columnVisibilityData.length===0)return;const r=n.target.parentNode,o=this.scrollContainer.current.scrollLeft,c=this.scrollContainer.current.offsetWidth,l=o+c,d=this.state.columnVisibilityData.length>0?(h=this.state.columnVisibilityData[e])==null?void 0:h.rightEdge:0,u=r.offsetLeft,f=r.offsetLeft+r.offsetWidth;o>u-d&&(this.scrollContainer.current.scrollLeft=u-d),f>l&&(this.scrollContainer.current.scrollLeft=f-c)},this.stickyHeaderScrolling=()=>{const{current:n}=this.stickyTable,{current:e}=this.scrollContainer;n==null||e==null||(n.scrollLeft=e.scrollLeft)},this.scrollListener=()=>{var n;this.scrollStopTimer&&clearTimeout(this.scrollStopTimer),this.scrollStopTimer=setTimeout(()=>{this.setState(e=>({...this.calculateColumnVisibilityData(e.condensed)}))},100),this.setState({isScrolledFarthestLeft:((n=this.scrollContainer.current)==null?void 0:n.scrollLeft)===0}),this.props.stickyHeader&&this.stickyHeaderActive&&this.stickyHeaderScrolling()},this.handleHover=n=>()=>{this.setState({rowHovered:n})},this.handleFocus=n=>{var d;const e=this.fixedFirstColumns();if(this.scrollContainer.current==null||n.target==null)return;const s=n.target.parentNode,o=this.props?(d=this.state.columnVisibilityData[e])==null?void 0:d.rightEdge:0,l=s.offsetLeft-o;this.scrollContainer.current.scrollLeft>l&&(this.scrollContainer.current.scrollLeft=l)},this.navigateTable=n=>{var u;const e=this.fixedFirstColumns(),{currentColumn:s,previousColumn:r}=this.state,o=(u=this.state.columnVisibilityData[e-1])==null?void 0:u.rightEdge;if(!s||!r)return;let c=0;for(let f=0;f<s.index;f++)c+=this.state.columnVisibilityData[f].width;const{current:l}=this.scrollContainer;return()=>{let f=0;e?f=n==="right"?c-o+s.width:c-r.width-o:f=n==="right"?s.rightEdge:r.leftEdge,l&&(l.scrollLeft=f,requestAnimationFrame(()=>{this.setState(h=>({...this.calculateColumnVisibilityData(h.condensed)}))}))}},this.renderHeading=({heading:n,headingIndex:e,inFixedNthColumn:s,inStickyHeader:r})=>{var y;const{sortable:o,truncate:c=!1,columnContentTypes:l,defaultSortDirection:d,initialSortColumnIndex:u=0,verticalAlign:f,firstColumnMinWidth:h}=this.props,b=this.fixedFirstColumns(),{sortDirection:E=d,sortedColumnIndex:x=u,isScrolledFarthestLeft:v}=this.state;let T;const M=`heading-cell-${e}`,I=`stickyheader-${e}`,N=r?I:M;if(o){const _=o[e],j=_&&x===e;T={defaultSortDirection:d,sorted:j,sortable:_,sortDirection:j?E:"none",onSort:this.defaultOnSort(e),fixedNthColumn:b,inFixedNthColumn:b}}const C=r?this.tableHeadingWidths[e]:void 0,P=!v,F={header:!0,stickyHeadingCell:r,content:n,contentType:l[e],nthColumn:e<b,fixedFirstColumns:b,truncate:c,headingIndex:e,...T,verticalAlign:f,handleFocus:this.handleFocus,stickyCellWidth:C,fixedCellVisible:P,firstColumnMinWidth:h};return s&&r?[i.createElement(de,Object.assign({key:N},F,{setRef:_=>{this.setCellRef({ref:_,index:e,inStickyHeader:r})},inFixedNthColumn:!1})),i.createElement(de,Object.assign({key:`${N}-sticky`},F,{setRef:_=>{this.setCellRef({ref:_,index:e,inStickyHeader:r})},inFixedNthColumn:!!b,lastFixedFirstColumn:e===b-1,style:{left:(y=this.state.columnVisibilityData[e])==null?void 0:y.leftEdge}}))]:i.createElement(de,Object.assign({key:N},F,{setRef:_=>{this.setCellRef({ref:_,index:e,inStickyHeader:r})},lastFixedFirstColumn:e===b-1,inFixedNthColumn:s}))},this.totalsRowHeading=()=>{const{i18n:n,totals:e,totalsName:s}=this.props,r=s||{singular:n.translate("Polaris.DataTable.totalRowHeading"),plural:n.translate("Polaris.DataTable.totalsRowHeading")};return e&&e.filter(o=>o!=="").length>1?r.plural:r.singular},this.renderTotals=({total:n,index:e})=>{const s=this.fixedFirstColumns(),r=`totals-cell-${e}`,{truncate:o=!1,verticalAlign:c,columnContentTypes:l}=this.props;let d,u;e===0&&(d=this.totalsRowHeading()),n!==""&&e>0&&(u=l[e],d=n);const f=this.props.showTotalsInFooter;return i.createElement(de,{total:!0,totalInFooter:f,nthColumn:e<=s-1,firstColumn:e===0,key:r,content:d,contentType:u,truncate:o,verticalAlign:c})},this.getColSpan=(n,e,s,r)=>{if(this.fixedFirstColumns())return 1;const c=n||1,l=e||s,d=Math.floor(l/c),u=l%c;return r===0?d+u:d},this.defaultRenderRow=({row:n,index:e,inFixedNthColumn:s,rowHeights:r})=>{const{columnContentTypes:o,truncate:c=!1,verticalAlign:l,hoverable:d=!0,headings:u}=this.props,{condensed:f}=this.state,h=this.fixedFirstColumns(),b=k(g.TableRow,d&&g.hoverable);return i.createElement("tr",{key:`row-${e}`,className:b,onMouseEnter:this.handleHover(e),onMouseLeave:this.handleHover()},n.map((E,x)=>{const v=e===this.state.rowHovered,T=`cell-${x}-row-${e}`,M=this.getColSpan(n.length,u.length,o.length,x);return i.createElement(de,{key:T,content:E,contentType:o[x],nthColumn:x<=h-1,firstColumn:x===0,truncate:c,verticalAlign:l,colSpan:M,hovered:v,style:r?{height:`${r[e]}px`}:{},inFixedNthColumn:f&&s})}))},this.defaultOnSort=n=>{const{onSort:e,defaultSortDirection:s="ascending",initialSortColumnIndex:r}=this.props,{sortDirection:o=s,sortedColumnIndex:c=r}=this.state;let l=s;return c===n&&(l=o==="ascending"?"descending":"ascending"),()=>{this.setState({sortDirection:l,sortedColumnIndex:n},()=>{e&&e(n,l)})}}}componentDidMount(){this.handleResize()}componentDidUpdate(a){Yt(a,this.props)||this.handleResize()}componentWillUnmount(){this.handleResize.cancel()}render(){var w,W,G;const{headings:a,totals:n,showTotalsInFooter:e,rows:s,footerContent:r,hideScrollIndicator:o=!1,increasedTableDensity:c=!1,hasZebraStripingOnData:l=!1,stickyHeader:d=!1,hasFixedFirstColumn:u=!1,pagination:f}=this.props,{condensed:h,columnVisibilityData:b,isScrolledFarthestLeft:E,isScrolledFarthestRight:x}=this.state,v=this.fixedFirstColumns(),T=s.length%2===0,M=k(g.DataTable,h&&g.condensed,n&&g.ShowTotals,e&&g.ShowTotalsInFooter,l&&g.ZebraStripingOnData,l&&T&&g.RowCountIsEven),I=k(g.TableWrapper,h&&g.condensed,c&&g.IncreasedTableDensity,d&&g.StickyHeaderEnabled),N=i.createElement("tr",null,a.map((S,D)=>this.renderHeading({heading:S,headingIndex:D,inFixedNthColumn:!1,inStickyHeader:!1}))),C=n?i.createElement("tr",null,n.map((S,D)=>this.renderTotals({total:S,index:D}))):null,P=s.map(S=>S.slice(0,v)),F=a.slice(0,v),y=n==null?void 0:n.slice(0,v),_=(w=this.table.current)==null?void 0:w.children[0].childNodes,j=(W=this.table.current)==null?void 0:W.children[1].childNodes,O=Ue(_),V=Ue(j),q=h&&v!==0&&i.createElement("table",{className:k(g.FixedFirstColumn,!E&&g.separate),style:{width:`${(G=b[v-1])==null?void 0:G.rightEdge}px`}},i.createElement("thead",null,i.createElement("tr",{style:{height:`${O[0]}px`}},F.map((S,D)=>this.renderHeading({heading:S,headingIndex:D,inFixedNthColumn:!0,inStickyHeader:!1}))),n&&!e&&i.createElement("tr",{style:{height:`${O[1]}px`}},y==null?void 0:y.map((S,D)=>this.renderTotals({total:S,index:D})))),i.createElement("tbody",null,P.map((S,D)=>this.defaultRenderRow({row:S,index:D,inFixedNthColumn:!0,rowHeights:V}))),n&&e&&i.createElement("tfoot",null,i.createElement("tr",null,y==null?void 0:y.map((S,D)=>this.renderTotals({total:S,index:D}))))),L=s.map((S,D)=>this.defaultRenderRow({row:S,index:D,inFixedNthColumn:!1})),$=r?i.createElement("div",{className:g.Footer},r):null,Z=f?i.createElement(gt,Object.assign({type:"table"},f)):null,A=e?null:C,U=e?i.createElement("tfoot",null,C):null,B=S=>o?null:i.createElement(ln,{columnVisibilityData:b,isScrolledFarthestLeft:E,isScrolledFarthestRight:x,navigateTableLeft:this.navigateTable("left"),navigateTableRight:this.navigateTable("right"),fixedFirstColumns:v,setRef:D=>{S==="header"?this.headerNav=D:S==="sticky"&&(this.stickyNav=D)}}),K=d?i.createElement(nn,null,i.createElement("div",{className:g.StickyHeaderWrapper,role:"presentation"},i.createElement(on,{boundingElement:this.dataTable.current,onStickyChange:S=>{this.changeHeadingFocus(),this.stickyHeaderActive=S}},S=>{const D=k(g.StickyHeaderInner,S&&g["StickyHeaderInner-isSticky"]),ve=k(g.StickyHeaderTable,!E&&g.separate);return i.createElement("div",{className:D},i.createElement("div",null,B("sticky")),i.createElement("table",{className:ve,ref:this.stickyTable},i.createElement("thead",null,i.createElement("tr",{className:g.StickyTableHeadingsRow},a.map((ye,Le)=>this.renderHeading({heading:ye,headingIndex:Le,inFixedNthColumn:!!(Le<=v-1&&v),inStickyHeader:!0}))))))}))):null;return i.createElement("div",{className:I,ref:this.dataTable},K,B("header"),i.createElement("div",{className:M},i.createElement("div",{className:g.ScrollContainer,ref:this.scrollContainer},i.createElement(De,{event:"resize",handler:this.handleResize}),i.createElement(De,{capture:!0,passive:!0,event:"scroll",handler:this.scrollListener}),q,i.createElement("table",{className:g.Table,ref:this.table},i.createElement("thead",null,N,A),i.createElement("tbody",null,L),U)),Z,$))}fixedFirstColumns(){const{hasFixedFirstColumn:a,fixedFirstColumns:n=0,headings:e}=this.props,s=a&&!n?1:n;return s>=e.length?0:s}}function dn(t){const a=le();return i.createElement(cn,Object.assign({},t,{i18n:a}))}const un=m.memo(function({children:a,disabled:n,root:e}){return m.useEffect(()=>{if(n||!e)return;const s=fn(e)?e.current:e;!s||s.querySelector("[autofocus]")||Ce(s,!1)},[n,e]),i.createElement(i.Fragment,null,a)});function fn(t){return t.current!==void 0}function ge(){return ge=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var e in n)({}).hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t},ge.apply(null,arguments)}function je(t,a){if(t==null)return{};var n={};for(var e in t)if({}.hasOwnProperty.call(t,e)){if(a.indexOf(e)!==-1)continue;n[e]=t[e]}return n}function _e(t,a){return _e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,e){return n.__proto__=e,n},_e(t,a)}function Re(t,a){t.prototype=Object.create(a.prototype),t.prototype.constructor=t,_e(t,a)}function pn(t,a){return t.classList?!!a&&t.classList.contains(a):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+a+" ")!==-1}function hn(t,a){t.classList?t.classList.add(a):pn(t,a)||(typeof t.className=="string"?t.className=t.className+" "+a:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+a))}function Ge(t,a){return t.replace(new RegExp("(^|\\s)"+a+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function mn(t,a){t.classList?t.classList.remove(a):typeof t.className=="string"?t.className=Ge(t.className,a):t.setAttribute("class",Ge(t.className&&t.className.baseVal||"",a))}const qe={disabled:!1},be=i.createContext(null);var it=function(a){return a.scrollTop},fe="unmounted",ne="exited",ae="entering",ie="entered",Me="exiting",Y=function(t){Re(a,t);function a(e,s){var r;r=t.call(this,e,s)||this;var o=s,c=o&&!o.isMounting?e.enter:e.appear,l;return r.appearStatus=null,e.in?c?(l=ne,r.appearStatus=ae):l=ie:e.unmountOnExit||e.mountOnEnter?l=fe:l=ne,r.state={status:l},r.nextCallback=null,r}a.getDerivedStateFromProps=function(s,r){var o=s.in;return o&&r.status===fe?{status:ne}:null};var n=a.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var r=null;if(s!==this.props){var o=this.state.status;this.props.in?o!==ae&&o!==ie&&(r=ae):(o===ae||o===ie)&&(r=Me)}this.updateStatus(!1,r)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,r,o,c;return r=o=c=s,s!=null&&typeof s!="number"&&(r=s.exit,o=s.enter,c=s.appear!==void 0?s.appear:o),{exit:r,enter:o,appear:c}},n.updateStatus=function(s,r){if(s===void 0&&(s=!1),r!==null)if(this.cancelNextCallback(),r===ae){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:pe.findDOMNode(this);o&&it(o)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ne&&this.setState({status:fe})},n.performEnter=function(s){var r=this,o=this.props.enter,c=this.context?this.context.isMounting:s,l=this.props.nodeRef?[c]:[pe.findDOMNode(this),c],d=l[0],u=l[1],f=this.getTimeouts(),h=c?f.appear:f.enter;if(!s&&!o||qe.disabled){this.safeSetState({status:ie},function(){r.props.onEntered(d)});return}this.props.onEnter(d,u),this.safeSetState({status:ae},function(){r.props.onEntering(d,u),r.onTransitionEnd(h,function(){r.safeSetState({status:ie},function(){r.props.onEntered(d,u)})})})},n.performExit=function(){var s=this,r=this.props.exit,o=this.getTimeouts(),c=this.props.nodeRef?void 0:pe.findDOMNode(this);if(!r||qe.disabled){this.safeSetState({status:ne},function(){s.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:Me},function(){s.props.onExiting(c),s.onTransitionEnd(o.exit,function(){s.safeSetState({status:ne},function(){s.props.onExited(c)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,r){r=this.setNextCallback(r),this.setState(s,r)},n.setNextCallback=function(s){var r=this,o=!0;return this.nextCallback=function(c){o&&(o=!1,r.nextCallback=null,s(c))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(s,r){this.setNextCallback(r);var o=this.props.nodeRef?this.props.nodeRef.current:pe.findDOMNode(this),c=s==null&&!this.props.addEndListener;if(!o||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],d=l[0],u=l[1];this.props.addEndListener(d,u)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===fe)return null;var r=this.props,o=r.children;r.in,r.mountOnEnter,r.unmountOnExit,r.appear,r.enter,r.exit,r.timeout,r.addEndListener,r.onEnter,r.onEntering,r.onEntered,r.onExit,r.onExiting,r.onExited,r.nodeRef;var c=je(r,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return i.createElement(be.Provider,{value:null},typeof o=="function"?o(s,c):i.cloneElement(i.Children.only(o),c))},a}(i.Component);Y.contextType=be;Y.propTypes={};function re(){}Y.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:re,onEntering:re,onEntered:re,onExit:re,onExiting:re,onExited:re};Y.UNMOUNTED=fe;Y.EXITED=ne;Y.ENTERING=ae;Y.ENTERED=ie;Y.EXITING=Me;var gn=function(a,n){return a&&n&&n.split(" ").forEach(function(e){return hn(a,e)})},ke=function(a,n){return a&&n&&n.split(" ").forEach(function(e){return mn(a,e)})},Ee=function(t){Re(a,t);function a(){for(var e,s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,e.appliedClasses={appear:{},enter:{},exit:{}},e.onEnter=function(c,l){var d=e.resolveArguments(c,l),u=d[0],f=d[1];e.removeClasses(u,"exit"),e.addClass(u,f?"appear":"enter","base"),e.props.onEnter&&e.props.onEnter(c,l)},e.onEntering=function(c,l){var d=e.resolveArguments(c,l),u=d[0],f=d[1],h=f?"appear":"enter";e.addClass(u,h,"active"),e.props.onEntering&&e.props.onEntering(c,l)},e.onEntered=function(c,l){var d=e.resolveArguments(c,l),u=d[0],f=d[1],h=f?"appear":"enter";e.removeClasses(u,h),e.addClass(u,h,"done"),e.props.onEntered&&e.props.onEntered(c,l)},e.onExit=function(c){var l=e.resolveArguments(c),d=l[0];e.removeClasses(d,"appear"),e.removeClasses(d,"enter"),e.addClass(d,"exit","base"),e.props.onExit&&e.props.onExit(c)},e.onExiting=function(c){var l=e.resolveArguments(c),d=l[0];e.addClass(d,"exit","active"),e.props.onExiting&&e.props.onExiting(c)},e.onExited=function(c){var l=e.resolveArguments(c),d=l[0];e.removeClasses(d,"exit"),e.addClass(d,"exit","done"),e.props.onExited&&e.props.onExited(c)},e.resolveArguments=function(c,l){return e.props.nodeRef?[e.props.nodeRef.current,c]:[c,l]},e.getClassNames=function(c){var l=e.props.classNames,d=typeof l=="string",u=d&&l?l+"-":"",f=d?""+u+c:l[c],h=d?f+"-active":l[c+"Active"],b=d?f+"-done":l[c+"Done"];return{baseClassName:f,activeClassName:h,doneClassName:b}},e}var n=a.prototype;return n.addClass=function(s,r,o){var c=this.getClassNames(r)[o+"ClassName"],l=this.getClassNames("enter"),d=l.doneClassName;r==="appear"&&o==="done"&&d&&(c+=" "+d),o==="active"&&s&&it(s),c&&(this.appliedClasses[r][o]=c,gn(s,c))},n.removeClasses=function(s,r){var o=this.appliedClasses[r],c=o.base,l=o.active,d=o.done;this.appliedClasses[r]={},c&&ke(s,c),l&&ke(s,l),d&&ke(s,d)},n.render=function(){var s=this.props;s.classNames;var r=je(s,["classNames"]);return i.createElement(Y,ge({},r,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},a}(i.Component);Ee.defaultProps={classNames:""};Ee.propTypes={};function bn(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function He(t,a){var n=function(r){return a&&m.isValidElement(r)?a(r):r},e=Object.create(null);return t&&m.Children.map(t,function(s){return s}).forEach(function(s){e[s.key]=n(s)}),e}function Cn(t,a){t=t||{},a=a||{};function n(u){return u in a?a[u]:t[u]}var e=Object.create(null),s=[];for(var r in t)r in a?s.length&&(e[r]=s,s=[]):s.push(r);var o,c={};for(var l in a){if(e[l])for(o=0;o<e[l].length;o++){var d=e[l][o];c[e[l][o]]=n(d)}c[l]=n(l)}for(o=0;o<s.length;o++)c[s[o]]=n(s[o]);return c}function se(t,a,n){return n[a]!=null?n[a]:t.props[a]}function En(t,a){return He(t.children,function(n){return m.cloneElement(n,{onExited:a.bind(null,n),in:!0,appear:se(n,"appear",t),enter:se(n,"enter",t),exit:se(n,"exit",t)})})}function vn(t,a,n){var e=He(t.children),s=Cn(a,e);return Object.keys(s).forEach(function(r){var o=s[r];if(m.isValidElement(o)){var c=r in a,l=r in e,d=a[r],u=m.isValidElement(d)&&!d.props.in;l&&(!c||u)?s[r]=m.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:se(o,"exit",t),enter:se(o,"enter",t)}):!l&&c&&!u?s[r]=m.cloneElement(o,{in:!1}):l&&c&&m.isValidElement(d)&&(s[r]=m.cloneElement(o,{onExited:n.bind(null,o),in:d.props.in,exit:se(o,"exit",t),enter:se(o,"enter",t)}))}}),s}var yn=Object.values||function(t){return Object.keys(t).map(function(a){return t[a]})},xn={component:"div",childFactory:function(a){return a}},we=function(t){Re(a,t);function a(e,s){var r;r=t.call(this,e,s)||this;var o=r.handleExited.bind(bn(r));return r.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},r}var n=a.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},a.getDerivedStateFromProps=function(s,r){var o=r.children,c=r.handleExited,l=r.firstRender;return{children:l?En(s,c):vn(s,o,c),firstRender:!1}},n.handleExited=function(s,r){var o=He(this.props.children);s.key in o||(s.props.onExited&&s.props.onExited(r),this.mounted&&this.setState(function(c){var l=ge({},c.children);return delete l[s.key],{children:l}}))},n.render=function(){var s=this.props,r=s.component,o=s.childFactory,c=je(s,["component","childFactory"]),l=this.state.contextValue,d=yn(this.state.children).map(o);return delete c.appear,delete c.enter,delete c.exit,r===null?i.createElement(be.Provider,{value:l},d):i.createElement(be.Provider,{value:l},i.createElement(r,c,d))},a}(i.Component);we.propTypes={};we.defaultProps=xn;var Te={Body:"Polaris-Modal__Body",NoScrollBody:"Polaris-Modal__NoScrollBody",IFrame:"Polaris-Modal__IFrame"},Ze={Section:"Polaris-Modal-Section",titleHidden:"Polaris-Modal-Section--titleHidden"};function ot({children:t,flush:a=!1,subdued:n=!1,titleHidden:e=!1}){const s=k(Ze.Section,e&&Ze.titleHidden);return i.createElement("div",{className:s},i.createElement(z,Object.assign({as:"section",padding:a?"0":"400"},e&&{paddingInlineEnd:"0"},n&&{background:"bg-surface-tertiary"}),t))}var H={Container:"Polaris-Modal-Dialog__Container",Dialog:"Polaris-Modal-Dialog",Modal:"Polaris-Modal-Dialog__Modal",limitHeight:"Polaris-Modal-Dialog--limitHeight",sizeSmall:"Polaris-Modal-Dialog--sizeSmall",sizeLarge:"Polaris-Modal-Dialog--sizeLarge",sizeFullScreen:"Polaris-Modal-Dialog--sizeFullScreen",animateFadeUp:"Polaris-Modal-Dialog--animateFadeUp",entering:"Polaris-Modal-Dialog--entering",exiting:"Polaris-Modal-Dialog--exiting",exited:"Polaris-Modal-Dialog--exited",entered:"Polaris-Modal-Dialog--entered"};function Sn({trapping:t}){const a=m.useContext(Ht),n=m.useId();if(!a)throw new Ie("No FocusManager was provided.");const{trapFocusList:e,add:s,remove:r}=a,o=e[0]===n,c=m.useMemo(()=>({canSafelyFocus:o}),[o]);return m.useEffect(()=>{if(t)return s(n),()=>{r(n)}},[s,n,r,t]),c}function kn({trapping:t=!0,children:a}){const{canSafelyFocus:n}=Sn({trapping:t}),e=m.useRef(null),[s,r]=m.useState(!0);m.useEffect(()=>{const l=n&&!(e.current&&e.current.contains(document.activeElement))?!t:!0;r(l)},[n,t]);const o=l=>{const d=e.current&&e.current.contains(document.activeElement);t===!1||!e.current||d||l.target instanceof Element&&l.target.matches(`${jt.selector} *`)||n&&l.target instanceof HTMLElement&&e.current!==l.target&&!e.current.contains(l.target)&&Ce(e.current)},c=l=>{if(t===!1||!e.current)return;const d=yt(e.current),u=xt(e.current);l.target===u&&!l.shiftKey&&(l.preventDefault(),St(e.current)),l.target===d&&l.shiftKey&&(l.preventDefault(),kt(e.current))};return i.createElement(un,{disabled:s,root:e.current},i.createElement("div",{ref:e},i.createElement(De,{event:"focusin",handler:o}),i.createElement(Pe,{keyCode:Ne.Tab,keyEvent:"keydown",handler:c}),a))}function Tn({instant:t,labelledBy:a,children:n,limitHeight:e,size:s,onClose:r,onExited:o,onEntered:c,setClosing:l,hasToasts:d,...u}){const f=tt(),h=m.useRef(null),b=m.useContext(Gt);let E;b&&(E=b.toastMessages);const x=k(H.Modal,s&&H[oe("size",s)],e&&H.limitHeight),v=t?Y:Nn;m.useEffect(()=>{h.current&&!h.current.contains(document.activeElement)&&Ce(h.current)},[]);const T=()=>{l&&l(!0)},M=()=>{l&&l(!1),r()},I=i.createElement("div",{"aria-live":"assertive"},E?E.map(N=>i.createElement(R,{visuallyHidden:!0,as:"p",key:N.id},N.content)):null);return i.createElement(v,Object.assign({},u,{nodeRef:h,mountOnEnter:!0,unmountOnExit:!0,timeout:parseInt(f.motion["motion-duration-200"],10),onEntered:c,onExited:o}),i.createElement("div",{className:H.Container,"data-polaris-layer":!0,"data-polaris-overlay":!0,ref:h},i.createElement(kn,null,i.createElement("div",{role:"dialog","aria-modal":!0,"aria-label":a,"aria-labelledby":a,tabIndex:-1,className:H.Dialog},i.createElement("div",{className:x},i.createElement(Pe,{keyCode:Ne.Escape,keyEvent:"keydown",handler:T}),i.createElement(Pe,{keyCode:Ne.Escape,handler:M}),n),I))))}const Pn={appear:k(H.animateFadeUp,H.entering),appearActive:k(H.animateFadeUp,H.entered),enter:k(H.animateFadeUp,H.entering),enterActive:k(H.animateFadeUp,H.entered),exit:k(H.animateFadeUp,H.exiting),exitActive:k(H.animateFadeUp,H.exited)};function Nn({children:t,...a}){return i.createElement(Ee,Object.assign({},a,{classNames:Pn}),t)}function Ke({pressed:t,onClick:a}){const n=le();return i.createElement(J,{variant:"tertiary",pressed:t,icon:Dt,onClick:a,accessibilityLabel:n.translate("Polaris.Common.close")})}function Dn({id:t,children:a,closing:n,titleHidden:e,onClose:s}){const r="400",o="400";return e||!a?i.createElement(z,{position:"absolute",insetInlineEnd:r,insetBlockStart:o,zIndex:"1"},i.createElement(Ke,{onClick:s})):i.createElement(z,{paddingBlockStart:"400",paddingBlockEnd:"400",paddingInlineStart:r,paddingInlineEnd:r,borderBlockEndWidth:"025",borderColor:"border",background:"bg-surface-tertiary"},i.createElement(zt,{columns:{xs:"1fr auto"},gap:"400"},i.createElement(te,{gap:"400",blockAlign:"center"},i.createElement(R,{id:t,as:"h2",variant:"headingMd",breakWord:!0},a)),i.createElement(Ke,{pressed:n,onClick:s})))}function Fn({primaryAction:t,secondaryActions:a,children:n}){const e=t&&Ae(t,{variant:"primary"})||null,s=a&&Ae(a)||null,r=e||s?i.createElement(te,{gap:"200"},s,e):null;return i.createElement(te,{gap:"400",blockAlign:"center"},i.createElement(z,{borderColor:"border",borderBlockStartWidth:"025",padding:"400",width:"100%"},i.createElement(te,{gap:"400",blockAlign:"center",align:"space-between"},i.createElement(z,null,n),r)))}const Xe=200,_n=400,lt=function({children:a,title:n,titleHidden:e=!1,src:s,iFrameName:r,open:o,instant:c,sectioned:l,loading:d,size:u,limitHeight:f,footer:h,primaryAction:b,secondaryActions:E,onScrolledToBottom:x,activator:v,activatorWrapper:T="div",onClose:M,onIFrameLoad:I,onTransitionEnd:N,noScroll:C}){const[P,F]=m.useState(Xe),[y,_]=m.useState(!1),j=m.useId(),O=m.useRef(null),q=le().translate("Polaris.Modal.iFrameTitle");let L,$;const Z=m.useCallback(()=>{N&&N()},[N]),A=m.useCallback(()=>{F(Xe);const w=v&&Je(v)?v&&v.current:O.current;w&&requestAnimationFrame(()=>Ce(w))},[v]),U=m.useCallback(w=>{const W=w.target;if(W&&W.contentWindow)try{F(W.contentWindow.document.body.scrollHeight)}catch{F(_n)}I!=null&&I(w)},[I]);if(o){const w=!h&&!b&&!E?null:i.createElement(Fn,{primaryAction:b,secondaryActions:E},h),W=l?Tt(a,ot,{titleHidden:e}):a,G=d?i.createElement(z,{padding:"400"},i.createElement(te,{gap:"400",align:"center",blockAlign:"center"},i.createElement(Nt,null))):W,S=C?i.createElement("div",{className:Te.NoScrollBody},i.createElement(z,{width:"100%",overflowX:"hidden",overflowY:"hidden"},G)):i.createElement(Ct,{shadow:!0,className:Te.Body,onScrolledToBottom:x},G),D=s?i.createElement("iframe",{name:r,title:q,src:s,className:Te.IFrame,onLoad:U,style:{height:`${P}px`}}):S;L=i.createElement(Tn,{instant:c,labelledBy:j,onClose:M,onEntered:Z,onExited:A,size:u,limitHeight:f,setClosing:_},i.createElement(Dn,{titleHidden:e,id:j,closing:y,onClose:M},n),D,w),$=i.createElement(Vt,{setClosing:_,onClick:M})}const B=!c,K=v&&!Je(v)?i.createElement(z,{ref:O,as:T},v):null;return i.createElement(Pt.Provider,{value:!0},K,i.createElement(bt,{idPrefix:"modal"},i.createElement(we,{appear:B,enter:B,exit:B},L),$))};function Je(t){return Object.prototype.hasOwnProperty.call(t,"current")}lt.Section=ot;var ee={ProgressBar:"Polaris-ProgressBar",sizeSmall:"Polaris-ProgressBar--sizeSmall",sizeMedium:"Polaris-ProgressBar--sizeMedium",sizeLarge:"Polaris-ProgressBar--sizeLarge",toneHighlight:"Polaris-ProgressBar--toneHighlight",tonePrimary:"Polaris-ProgressBar--tonePrimary",toneSuccess:"Polaris-ProgressBar--toneSuccess",toneCritical:"Polaris-ProgressBar--toneCritical",Indicator:"Polaris-ProgressBar__Indicator",IndicatorAppearActive:"Polaris-ProgressBar__IndicatorAppearActive",IndicatorAppearDone:"Polaris-ProgressBar__IndicatorAppearDone",Progress:"Polaris-ProgressBar__Progress",Label:"Polaris-ProgressBar__Label"};function Mn({progress:t=0,size:a="medium",tone:n="highlight",animated:e=!0,ariaLabelledBy:s}){const r=tt(),o=le(),c=m.useRef(null),l=k(ee.ProgressBar,a&&ee[oe("size",a)],n&&ee[oe("tone",n)]);o.translate(t<0?"Polaris.ProgressBar.negativeWarningMessage":"Polaris.ProgressBar.exceedWarningMessage",{progress:t});const d=In(t),u=e?r.motion["motion-duration-500"]:r.motion["motion-duration-0"];return i.createElement("div",{className:l},i.createElement("progress",{"aria-labelledby":s,className:ee.Progress,value:d,max:"100"}),i.createElement(Ee,{in:!0,appear:!0,timeout:parseInt(u,10),nodeRef:c,classNames:{appearActive:ee.IndicatorAppearActive,appearDone:ee.IndicatorAppearDone}},i.createElement("div",{ref:c,className:ee.Indicator,style:{"--pc-progress-bar-duration":u,"--pc-progress-bar-percent":d/100}},i.createElement("span",{className:ee.Label},d,"%"))))}function In(t,a){let n;return t<0?n=0:t>100?n=100:n=t,n}function zn(){var N;const t=dt(),[a,n]=m.useState(""),[e,s]=m.useState([]),[r,o]=m.useState(""),[c,l]=m.useState(!1),[d,u]=m.useState([]),[f,h]=m.useState(null),[b,E]=m.useState(!1),[x,v]=m.useState(0),T=async()=>{if(!a.trim()){alert("Please enter product IDs (comma-separated)");return}l(!0),v(0);const C=a.split(",").map(y=>y.trim()).filter(y=>y),F={products:(await Promise.all(C.map(async y=>(await fetch("/admin/api/2024-01/graphql.json",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
              query {
                product(id: "gid://shopify/Product/${y}") {
                  id
                  title
                  tags
                  description
                  descriptionHtml
                  images(first: 5) {
                    edges {
                      node {
                        id
                        altText
                        src
                      }
                    }
                  }
                }
              }
            `})})).json()))).map(y=>{var _,j,O,V,q,L,$,Z,A,U,B,K;return{productId:(j=(_=y.data)==null?void 0:_.product)==null?void 0:j.id,title:(V=(O=y.data)==null?void 0:O.product)==null?void 0:V.title,tags:(L=(q=y.data)==null?void 0:q.product)==null?void 0:L.tags,description:(Z=($=y.data)==null?void 0:$.product)==null?void 0:Z.description,images:(K=(B=(U=(A=y.data)==null?void 0:A.product)==null?void 0:U.images)==null?void 0:B.edges)==null?void 0:K.map(w=>({alt:w.node.altText,src:w.node.src}))}}),context:r,mode:"analyze"};t.submit(F,{method:"POST",action:"/api/bulk-analyze",encType:"application/json"})};m.useEffect(()=>{var C,P,F;(C=t.data)!=null&&C.results?(u(t.data.results),l(!1)):(P=t.data)!=null&&P.scannedIds?(n(t.data.scannedIds.join(", ")),t.data.scannedResults&&s(t.data.scannedResults),l(!1),shopify.toast.show(`Loaded ${t.data.scannedIds.length} priority products`)):(F=t.data)!=null&&F.error&&(l(!1),shopify.toast.show(t.data.error,{isError:!0}))},[t.data]);const M=d.filter(C=>C.ready).length,I=d.filter(C=>!C.ready).length;return p.jsxs(Et,{children:[p.jsx(vt,{title:"Bulk Product Analyzer"}),p.jsxs(xe,{children:[p.jsx(xe.Section,{children:p.jsx(Oe,{children:p.jsxs(ce,{gap:"400",children:[p.jsx(R,{variant:"headingMd",as:"h2",children:"Analyze Products for Accessibility & SEO"}),e.length>0&&p.jsx(We,{tone:"warning",title:`Audit Report: ${e.length} Priority Items Found`,children:p.jsx(z,{padding:"200",children:p.jsx(ce,{gap:"200",children:e.map((C,P)=>p.jsxs(R,{as:"p",children:[p.jsx("strong",{children:C.title}),": ",C.reasons.join(", ")]},P))})})}),p.jsx(Be,{label:"Product IDs (comma-separated)",placeholder:"gid://shopify/Product/123, gid://shopify/Product/456",value:a,onChange:n,multiline:3,autoComplete:"off",disabled:c,connectedRight:p.jsx(J,{onClick:()=>{l(!0),t.submit({mode:"scan"},{method:"POST",action:"/api/bulk-analyze",encType:"application/json"})},variant:"primary",disabled:c,loading:c&&!a,children:"Scan Store (Auto-Load)"})}),p.jsx(Be,{label:"Strategy / Trend Context (Optional)",placeholder:"e.g. Trend: 'Cottagecore'. Goal: Increase organic traffic.",value:r,onChange:o,multiline:2,autoComplete:"off",helpText:"Context to guide the AI's analysis of these products."}),p.jsxs(te,{gap:"200",children:[p.jsx(J,{variant:"primary",onClick:T,disabled:c||!a.trim(),children:c?"Analyzing...":"Analyze Products"}),p.jsx(J,{tone:"critical",onClick:()=>{l(!0),t.submit({},{method:"POST",action:"/api/executive-burst"})},disabled:c,children:" CONTENT BURST (40)"}),p.jsx(J,{tone:"success",onClick:()=>{l(!0),t.submit({},{method:"POST",action:"/api/media-optimizer"})},disabled:c,children:" VISUAL BURST (40)"})]}),((N=t.data)==null?void 0:N.error)&&p.jsx("div",{style:{marginTop:"1rem"},children:p.jsx(We,{tone:"critical",children:p.jsx("p",{children:t.data.error})})}),c&&x>0&&p.jsxs(z,{children:[p.jsx(Mn,{progress:x}),p.jsxs(R,{variant:"bodySm",as:"p",children:["Processing ",Math.round(x*100),"%"]})]})]})})}),d.length>0&&p.jsx(xe.Section,{children:p.jsx(Oe,{children:p.jsxs(ce,{gap:"400",children:[p.jsxs(te,{children:[p.jsx(he,{tone:"success",children:`${M} Ready to Apply`}),p.jsx(he,{tone:"warning",children:`${I} Needs Review`})]}),p.jsx(dn,{columnContentTypes:["text","text","text","text","text"],headings:["Product","SEO Score","A11y Score","Status","Action"],rows:d.map(C=>[C.currentTitle.substring(0,40),`${C.seoScore}/100`,`${C.accessibilityScore}/100`,C.ready?p.jsx(he,{tone:"success",children:"Ready"}):p.jsx(he,{tone:"warning",children:"Review"}),p.jsx(J,{variant:"plain",onClick:()=>h(C),children:"Details"})])})]})})}),f&&p.jsx(lt,{open:!!f,onClose:()=>h(null),title:"Analysis Details",children:p.jsx(z,{padding:"400",children:p.jsxs(ce,{gap:"300",children:[p.jsxs("div",{children:[p.jsx(R,{variant:"headingSm",as:"h3",children:"Current Title"}),p.jsx(R,{as:"p",children:f.currentTitle})]}),p.jsxs("div",{children:[p.jsx(R,{variant:"headingSm",as:"h3",children:"Suggested Title"}),p.jsx(R,{as:"p",children:f.suggestedTitle})]}),p.jsxs("div",{children:[p.jsx(R,{variant:"headingSm",as:"h3",children:"Suggested Description"}),p.jsx(z,{padding:"200",background:"bg-surface-secondary",borderRadius:"200",children:p.jsx(R,{as:"p",truncate:!0,children:f.suggestedDescription})})]}),p.jsxs("div",{children:[p.jsx(R,{variant:"headingSm",as:"h3",children:"Tags Audit"}),p.jsx(R,{as:"p",tone:"subdued",children:f.suggestedTags||"No tags found"}),f.suggestedTags&&p.jsx("div",{style:{marginTop:"10px"},children:p.jsx(At,{label:"Apply Optimized Tags (Warning: May affect collections)",checked:b,onChange:C=>E(C)})})]}),f.flaggedIssues.length>0&&p.jsxs("div",{children:[p.jsx(R,{variant:"headingSm",as:"h3",children:" Flagged Issues"}),p.jsx(ce,{gap:"100",children:f.flaggedIssues.map((C,P)=>p.jsxs(R,{as:"p",children:[" ",C]},P))})]}),p.jsxs(te,{gap:"200",children:[p.jsx(J,{variant:"primary",disabled:!f.ready,onClick:()=>{const C={...f};b||delete C.suggestedTags;const P={products:[C],mode:"apply"};t.submit(P,{method:"POST",action:"/api/bulk-analyze",encType:"application/json"}),h(null)},children:"Apply Changes"}),p.jsx(J,{onClick:()=>h(null),children:"Close"})]})]})})})]})]})}export{zn as default};
